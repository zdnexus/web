<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
    <style>
        img{
            width: 260px;
        }
    </style>
</head>
<body>

<button>加载图片</button>
<img src="#" alt="测试" data-original = "./22d9dc1b51cc3d47960a20c2da34e64b.jpg">

<script>
    let oBtn = document.getElementsByTagName('button')[0];
    let oImg = document.images[0];
    
    oBtn.onclick = function(){
        oImg.src = 'img/loading.gif';
        if(oImg.dataset){
            aftLoadImg(oImg,oImg.dataset.original);
        }else{
            aftLoadImg(oImg,oImg.getAttribute('data-original'));
        }
    };
    
    function aftLoadImg(obj,url){
        let oImg = new Image();
        
        oImg.onload = function(){
            obj.src = oImg.src;
        };
        oImg.src = url;
    }
</script>
</body>
</html>